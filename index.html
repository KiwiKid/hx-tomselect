<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hx-tomselect</title>
    <script src="https://unpkg.com/htmx.org"></script>
    <link href="https://cdn.jsdelivr.net/npm/tom-select@latest/dist/css/tom-select.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/tom-select@latest/dist/js/tom-select.complete.min.js"></script>
    <script defer src="./hx-tomselect.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@latest/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css" />
    <link href="./prism-holi-theme.css" rel="stylesheet" />
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-S2BDGEP73W"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-QNEWNK6T05');
    </script>

</head>

<body class="bg-gray-900 text-white  p-10">
    <div class=" max-w-4xl mx-auto">

        <p class="p-4 text-xl mb-10">
            <a class="underline" href="https://github.com/kiwiKid/hx-tomselect">hx-tomselect</a> - a <a
                class="underline" href="https://v1.htmx.org/docs/#extensions" target="_">htmx extention</a> for <a
                class="underline" href="https://tom-select.js.org/">tom-select.js</a>
        </p>
        <section class="mb-20">
            <h1 class="text-xl">Install:</h1>
            <pre
                class="mb-2"><code class="language-html">&lt;script src="https://kiwikid.github.io/hx-tomselect/hx-tom-select.js"&gt;&lt;/script&gt;</code></pre>

            This extention relies on <a class="underline" href="https://v1.htmx.org">htmx</a> and <a class="underline"
                href="https://tom-select.js.org/">tom-select.js</a> being loaded before it is included:
            <pre class="mb-2"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;script src="https://unpkg.com/htmx.org@1.9.12"&gt;
        &lt;link href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.css" rel="stylesheet" /&gt;
        &lt;script src="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/js/tom-select.complete.min.js"&gt;
        &lt;script src="https://kiwikid.github.io/hx-tomselect/hx-tom-select.js"/&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;select hx-ext="tomselect"&gt;
            &lt;option value=""&gt;Select an option&lt;/option&gt;
            &lt;option value="1"&gt;Option 1&lt;/option&gt;
            &lt;option value="2"&gt;Option 2&lt;/option&gt;
            &lt;option value="3"&gt;Option 3&lt;/option&gt;
        &lt;/select&gt;
    &lt;/body&gt;
&lt;/html&gt;
                    </code></pre>
        </section>
        <h1 class="mb-2 text-xl">Demo:</h1>
        <section class="mb-20">
            <select hx-ext="tomselect,debug" class="block w-full mb-2">
                <option value="">Select</option>
                <option value="1">Option 1</option>
                <option value="2">Option 2</option>
                <option value="3">Option 3</option>
            </select>
        </section>
        <p>(Not really interested in publishing on npm, can on request)</p>

        <section class="mb-20">
            <h2 class="text-xl font-semibold mb-3">Input</h2>
            <p class="p-4">Allow creating new items</p>

            <select hx-ext="tomselect" ts-create="true" ts-create-on-blur="true" ts-max-items="10"
                class="block w-full mb-2">
                <option value="">Brilliant</option>
                <option value="1">Excellent</option>
                <option value="2">Top Notch</option>
                <option value="3">Awesome</option>
            </select>
            <pre class="mb-2"><code class="language-html">&lt;select hx-ext="tomselect" ts-create="true"&gt;
    &lt;option value=""&gt;Select an option&lt;/option&gt;
    &lt;option value="1"&gt;Option 1&lt;/option&gt;
    &lt;option value="2"&gt;Option 2&lt;/option&gt;
    &lt;option value="3"&gt;Option 3&lt;/option&gt;
&lt;/select&gt;</code></pre>
        </section>

        <section class="mb-20">
            <h2 class="text-xl font-semibold mb-3">Select</h2>
            <p class="p-4">Allow selecting multiple items</p>

            <select hx-ext="tomselect" ts-create="true" ts-create-on-blur="true" class="block w-full mb-2">
                <option value="">Brilliant</option>
                <option value="1">Excellent</option>
                <option value="2">Top Notch</option>
                <option value="3">Awesome</option>
            </select>
            <pre class="mb-2"><code class="language-html">&lt;select hx-ext="tomselect" multiple&gt;
    &lt;option value=""&gt;Select an option&lt;/option&gt;
    &lt;option value="1"&gt;Option 1&lt;/option&gt;
    &lt;option value="2"&gt;Option 2&lt;/option&gt;
    &lt;option value="3"&gt;Option 3&lt;/option&gt;
&lt;/select&gt;</code></pre>
        </section>




        <section class="mb-20">
            <h2 class="text-xl font-semibold mb-3">Delete</h2>
            <p class="p-4">(ts-remove-button-title also takes an custom string message)</p>
            <select hx-ext="tomselect" ts-max-items="3" ts-remove-button-title="true" multiple>
                <option value="">N/A</option>
                <option selected value="1">Option 1</option>
                <option selected value="2">Option 2</option>
                <option selected value="3">Option 3</option>
                <option selected value="4">Option 4</option>
                <option selected value="5">Option 5</option>
                <option value="6">Option 6</option>
                <option value="7">Option 7</option>
                <option value="8">Option 8</option>
                <option value="9">Option 9</option>
            </select>
            <pre class="mb-2"><code class="language-html">&lt;select
    hx-ext="tomselect" 
    ts-max-items="3"
    ts-remove-button-title="true"
    multiple
&gt;
    &lt;option value=""&gt;Select an option&lt;/option&gt;
    &lt;option value="1"&gt;Option 1&lt;/option&gt;
    &lt;option value="2"&gt;Option 2&lt;/option&gt;
    ...
&lt;/select&gt;</code></pre>
        </section>

        <section class="mb-20">
            <h2 class="text-xl font-semibold mb-3 text-2xl">Customisable</h2>
            <select class="text-3xl" hx-ext="tomselect" ts-item-class="text-3xl  py-3"
                ts-option-class="text-3xl w-full py-3 bg-green-100" multiple>
                <option value="">N/A</option>
                <option selected value="1">Option 1</option>
                <option selected value="2">Option 2</option>
                <option selected value="3">Option 3</option>
                <option selected value="4">Option 4</option>
                <option selected value="5">Option 5</option>
                <option value="6">Option 6</option>
                <option value="7">Option 7</option>
                <option value="8">Option 8</option>
                <option value="9">Option 9</option>
            </select>
            <pre class="mb-2 text-md"><code class="language-html">&lt;select
    hx-ext="tomselect" 
    ts-item-class="text-3xl py-3"
    ts-option-class="text-3xl w-full py-3 bg-red-100"
    ts-item-class="text-3xl py-3"
    multiple
&gt;
    &lt;option value=""&gt;Select an option&lt;/option&gt;
    &lt;option value="1"&gt;Option 1&lt;/option&gt;
    &lt;option value="2"&gt;Option 2&lt;/option&gt;
    ...
&lt;/select&gt;</code></pre>
        </section>


        <section class="mb-20">
            <h2 class="text-xl font-semibold mb-3">Configure:</h2>
            <p class="p-4">Config Options are prefixed with a `ts-` and generally match <a
                    href="https://tom-select.js.org/docs/" class="underline">TomSelect config options:</a>
                <script>
                    document.addEventListener('DOMContentLoaded', function () {
                        var attributeConfigs = window.hxTomSelectAttributeConfigOptions;
                        var configString = '', betaConfigString = '';

                        if (attributeConfigs && Array.isArray(attributeConfigs)) {
                            attributeConfigs.filter((ac) => !ac?._isBeta).forEach(function (config) {
                                var strToAdd = ""

                                switch (typeof config.configChange) {
                                    case 'string': {
                                        strToAdd = `${config.key} - "${config.configChange}"\n${config?._description ? `${config?._description}\n` : ''} ` + '\n\n';
                                        break
                                    }
                                    case 'function': /*{
                                        configString += `${config.key}\n${config?._description ? `${config?._description}\n` : ''}[custom-js-function]:\n\t\t${config.configChange} ` + '\n\n';
                                        break
                                    }*/
                                    default:
                                    case 'object': {
                                        strToAdd = `${config.key}\n${config?._description ? `${config?._description}\n` : ''}${JSON.stringify(config, null, 2)}` + '\n\n';
                                        break
                                    }
                                }
                                if (config._isBeta) {
                                    betaConfigString += strToAdd
                                } else {
                                    configString += strToAdd
                                }

                            });

                            configString = configString += "\n"

                            document.getElementById('attributeConfigsOutput').textContent = configString;
                            document.getElementById('betaAttributeConfigsOutput').textContent = betaConfigString;
                        }
                    });
                </script>
            <pre><code class="language-html" id="attributeConfigsOutput">
               
                </code></pre>

            <pre><code class="language-html" id="betaAttributeConfigsOutput">
               
                </code></pre>
            </p>
            <p class="p-4">If a non-valid key
                is
                found on an element a warning will be logged to the console and a `tom-select-warning` attribute
                added
                to
                the &lt;select&gt; tag
            </p>
            <p class="p-4">After processing, one of three attributes will be added to each select box:</p>
            OLD
            <pre><code>
                &lt;select ts-create="true"&gt; - allow item create&lt;/select&gt;
                
                &lt;select ts-max-items="10"&gt; - (default 1) only allow selection of this many options&lt;/select&gt;
                &lt;!-- (ensure the select tag has the 'multiple' attribute) --&gt
                
                &lt;select ts-max-options="3"&gt; - the max number of options to display&lt;/select&gt;
                
                &lt;select ts-remove-button-title="Remove this"&gt; - add a remove button with this hover text&lt;/select&gt;
                
                &lt;select ts-delete-confirm="Are you sure?"&gt; - after deleting item confirm with a message ('true' or message to confirm)&lt;/select&gt;
                
                &lt;select ts-create-filter="true"&gt; - add a regex on the add items (or 'true' for no commas)&lt;/select&gt;
                
                &lt;select ts-allow-empty-options="true"&gt;&lt;/select&gt;
                
                &lt;select ts-sort="field"&gt; - sets config.sortField.field &lt;/select&gt;
                
                &lt;select ts-sort-direction="asc"&gt; - sets config.sortField.direction &lt;/select&gt;
                
                &lt;select ts-raw-config="{JsonConfig}"&gt; - use raw tom-select config&lt;/select&gt;
                
                &lt;!--  Non-standard config options --&gt;
                &lt;select ts-debug="true"&gt; - (wip) debug logging (may remove)&gt;&lt;/select&gt;
                
                &lt;select ts-add-post-url="[ts-add-post-url]"&gt; - after input of a new item, make a POST request to this url&lt;/select&gt;
                &lt;select ts-add-post-url-body-value="[name-in-body]"&gt; - when making a POST request, use this [body-value] as the name in the body of the request&lt;/select&gt;
                
                The request will similar to:
                POST [ts-add-post-url]
                {
                    [ts-add-post-url-body-value]: value
                }
                
                &lt;select ts-clear-after-add="true"&gt; - clear the search input after adding an item&lt;/select&gt;
                </code></pre>
            <pre><code class="language-html">- &lt;select tom-select-success="true"&gt;
- &lt;select tom-select-warning="[warning details]"&gt; - non-breaking error (e.g. tag name is not recognised)
- &lt;select tom-select-error="[error details]"&gt; - Breaking error</code></pre>




        </section>

        <section class="mb-20">

            <p class="p-4">hx-oob swaps works too (and was the main motivation for writing this extention)</code></p>
            <button type="button" hx-get="another-place.html" hx-trigger="click" hx-swap="outerHTML"
                class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                (Click to dynamically load options)
            </button>
            <div id="holder"></div>
            <div id="source-holder">
                <pre class="mb-2"><code class="language-html">&lt;button 
    hx-get="another-place.html"
    hx-trigger="click"
&gt;(Click to dynamically load options)&lt;/button&gt;</code></pre>
            </div>
        </section>


        <section class="mb-20">
            <h2 class="text-xl font-semibold mb-3">Configuring Item Deletion Confirmation</h2>
            <p class="p-4">Supports a custom message or `true` for default text</p>
            <select hx-ext="tomselect" ts-remove-button-title="This DELETES THE ITEM!!"
                ts-delete-confirm="ARE YOU SURE!?!" multiple>
                <option value="1" selected>Item 1</option>
                <option value="2" selected>Item 2</option>
                <option value="3" selected>Item 3</option>
            </select>
            <pre><code class="language-html">&lt;select 
    hx-ext="tomselect" 
    ts-remove-button-title="This DELETES THE ITEM!!"
    ts-delete-confirm="ARE YOU SURE!?!"
    multiple
&gt;
    &lt;option value="1"&gt;Item 1&lt;/option&gt;
    &lt;option value="2"&gt;Item 2&lt;/option&gt;
    &lt;option value="3"&gt;Item 3&lt;/option&gt;
&lt;/select&gt;</code></pre>
        </section>




        <section class="mb-20">
            <h2 class="text-xl font-semibold mb-3">Create + Regex new item names</h2>
            <p>Allow creating new items + ts-create-filter="true" will prevent commas in the title, any other string
                will be used as a regex match</p>
            <select hx-ext="tomselect" ts-create="true" ts-max-items="10" ts-create-filter="^[^,]*$">
                <option value="">Select</option>
                <option value="1">ValidOption</option>
            </select>
            <pre><code class="language-html-dark">&lt;select 
    hx-ext="tomselect"
    ts-max-items="10"
    ts-create-filter="^[^,]*$"
&gt;
    &lt;option value=""&gt;Select an option&lt;/option&gt;
    &lt;option value="1"&gt;ValidOption&lt;/option&gt;
&lt;/select&gt;</code></pre>
        </section>

        <section class="mb-20">
            <h2 class="text-xl font-semibold mb-3">Create + POST request</h2>
            <p>(type to add a new option and see the network tab)</p>
            <select id="select-fine" hx-ext="tomselect" ts-create="true" ts-create-filter="true"
                ts-add-post-url="/this-could-be-your-new-thing-api" ts-persist="true" multiple
                placeholder="Add options(s)..." class="border border-gray-300 rounded-md text-gray-700 flex-grow mb-2">
                <option value="">Select</option>
                <option value="1">Option 1</option>
                <option value="2">Option 2</option>
                <option value="3">Option 3</option>
            </select>
            <pre><code class="language-html">&lt;select
    hx-ext="tomselect"
    ts-create-filter="true"
    ts-no-active="true"
    ts-add-post-url="/this-could-be-your-new-thing-api"
    ts-persist="true"
    multiple
&gt;
    &lt;option value=""&gt;Select&lt;/option&gt;
    &lt;option value="1"&gt;Option 1&lt;/option&gt;
    &lt;option value="2"&gt;Option 2&lt;/option&gt;
    &lt;option value="3"&gt;Option 3&lt;/option&gt;
&lt;/select&gt;
</code></pre>
        </section>

        <section class="mb-20">
            <h2 class="text-xl font-semibold mb-3">Advanced Configuration with Raw Config</h2>
            <select hx-ext="tomselect"
                ts-raw-config='{"create": true, "maxOptions":10, "plugins": {"dropdown_input": {}}}'>
                <option value="">Select</option>
                <option value="1">Option 1</option>
                <option value="2">Option 2</option>
                <option value="3">Option 3</option>
            </select>
        </section>



    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/prism.min.js"></script>
</body>

</html>